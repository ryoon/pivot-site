<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License,
Version 2.0 (the "License"); you may not use this file except in
compliance with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--><html xmlns="http://www.w3.org/1999/xhtml"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Data Binding | Apache Pivot</title><link href="/styles/pivot.css" rel="stylesheet" type="text/css" xmlns=""><link href="/styles/pivot_print.css" rel="stylesheet" type="text/css" media="print"><script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-7977275-3']);
                _gaq.push (['_gat._anonymizeIp']);
                _gaq.push(['_trackPageview']);
                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
                </script></head><body><div id="wrapper"><div id="main"><div id="header"><div class="logo"><a href="/index.html"><img src="/images/logo.png" alt="Apache Pivot" title="Apache Pivot Homepage"></a></div><div class="logoASF"><a href="http://www.apache.org/"><img src="/images/asf_logo_wide_transp.png" alt="Apache" title="Apache Homepage"></a></div><div class="tagline"><img src="/images/tagline.png" alt="Rich Internet Applications in Java" style="visibility:hidden"></div><ul class="navi"><li><a href="/demos/">Demos</a></li><li><a href="/download.cgi#2.0.5">Download</a></li><li><a href="/tutorials/">Tutorial</a></li><li><a href="/get-involved.html">Get Involved</a></li><li><a href="/about.html">About</a></li></ul></div><div id="contentBase" class="group"><h1>Data Binding</h1><ul class="naviLeft"><li><a href="/tutorials/sample-application.html">Sample Application</a></li><li><a href="/tutorials/platform-overview.html">Platform Overview</a></li><li><a href="/tutorials/hello-world.html">Hello, World!</a></li><li><a href="/tutorials/hello-bxml.html">Hello, BXML!</a></li><li><a href="/tutorials/component-and-container.html">Component &amp; Container</a></li><li><a href="/tutorials/labels-and-image-views.html">Labels &amp; Image Views</a></li><li><a href="/tutorials/svg-images.html">SVG Images</a></li><li><a href="/tutorials/buttons.html">Buttons</a></li><li><a href="/tutorials/push-buttons.html">Push Buttons</a></li><li><a href="/tutorials/toggle-buttons.html">Toggle Buttons</a></li><li><a href="/tutorials/radio-buttons.html">Radio Buttons</a></li><li><a href="/tutorials/checkboxes.html">Checkboxes</a></li><li><a href="/tutorials/link-buttons.html">Link Buttons</a></li><li><a href="/tutorials/lists.html">Lists</a></li><li><a href="/tutorials/list-buttons.html">List Buttons</a></li><li><a href="/tutorials/repeatable-list-buttons.html">Repeatable List Buttons</a></li><li><a href="/tutorials/text.html">Text</a></li><li><a href="/tutorials/suggestion-popups.html">Suggestion Popups</a></li><li><a href="/tutorials/text-areas.html">Text Areas</a></li><li><a href="/tutorials/separators.html">Separators</a></li><li><a href="/tutorials/layout-containers.html">Layout Containers</a></li><li><a href="/tutorials/flow-panes.html">Flow Panes</a></li><li><a href="/tutorials/box-panes.html">Box Panes</a></li><li><a href="/tutorials/fill-panes.html">Fill Panes</a></li><li><a href="/tutorials/grid-panes.html">Grid Panes</a></li><li><a href="/tutorials/table-panes.html">Table Panes</a></li><li><a href="/tutorials/borders.html">Borders</a></li><li><a href="/tutorials/stack-panes.html">Stack Panes</a></li><li><a href="/tutorials/split-panes.html">Split Panes</a></li><li><a href="/tutorials/forms.html">Forms</a></li><li><a href="/tutorials/panels.html">Panels</a></li><li><a href="/tutorials/navigation-containers.html">Navigation Containers</a></li><li><a href="/tutorials/card-panes.html">Card Panes</a></li><li><a href="/tutorials/tab-panes.html">Tab Panes</a></li><li><a href="/tutorials/accordions.html">Accordions</a></li><li><a href="/tutorials/expanders.html">Expanders</a></li><li><a href="/tutorials/rollups.html">Rollups</a></li><li><a href="/tutorials/viewports.html">Viewports</a></li><li><a href="/tutorials/scroll-panes.html">Scroll Panes</a></li><li><a href="/tutorials/panoramas.html">Panoramas</a></li><li><a href="/tutorials/progress-indicators.html">Progress Indicators</a></li><li><a href="/tutorials/meters.html">Meters</a></li><li><a href="/tutorials/activity-indicators.html">Activity Indicators</a></li><li><a href="/tutorials/bounded-range-components.html">Bounded Range Components</a></li><li><a href="/tutorials/sliders.html">Sliders</a></li><li><a href="/tutorials/scroll-bars.html">Scroll Bars</a></li><li><a href="/tutorials/spinners.html">Spinners</a></li><li><a href="/tutorials/calendars.html">Calendars</a></li><li><a href="/tutorials/menus.html">Menus</a></li><li><a href="/tutorials/context-menus.html">Context Menus</a></li><li><a href="/tutorials/menu-bars.html">Menu Bars</a></li><li><a href="/tutorials/menu-buttons.html">Menu Buttons</a></li><li><a href="/tutorials/color-choosers.html">Color Choosers</a></li><li><a href="/tutorials/table-views.html">Table Views</a></li><li><a href="/tutorials/table-views.json.html">JSON-based TableView</a></li><li><a href="/tutorials/table-views.custom.html">Custom TableView</a></li><li><a href="/tutorials/tree-views.html">Tree Views</a></li><li><a href="/tutorials/file-browsing.html">File Browsing</a></li><li><a href="/tutorials/windows.html">Windows</a></li><li><a href="/tutorials/clipboard.html">Clipboard</a></li><li><a href="/tutorials/drag-and-drop.html">Drag and Drop</a></li><li><a href="/tutorials/effects.html">Effects</a></li><li><a href="/tutorials/effects.transitions.html">Transitions</a></li><li><a href="/tutorials/data-binding.html">Data Binding</a></li><li><a href="/tutorials/property-binding.html">Property Binding</a></li><li><a href="/tutorials/localization.html">Localization</a></li><li><a href="/tutorials/background-tasks.html">Background Tasks</a></li><li><a href="/tutorials/web-queries.html">Web Queries</a></li><li><a href="/tutorials/query-servlet.html">QueryServlet</a></li><li><a href="/tutorials/scripting.html">Scripting</a></li><li><a href="/tutorials/summary.html">Summary</a></li><li><a href="/tutorials/stock-tracker.html">The "Stock Tracker" Application</a></li><li><a href="/tutorials/stock-tracker.ui.html">UI Markup Using BXML</a></li><li><a href="/tutorials/stock-tracker.events.html">Event Handling</a></li><li><a href="/tutorials/stock-tracker.web-queries.html">Web Queries</a></li><li><a href="/tutorials/stock-tracker.data-binding.html">Data Binding</a></li><li><a href="/tutorials/stock-tracker.localization.html">Localization</a></li><li><a href="/tutorials/bxml-primer.html">BXML Primer</a></li></ul><div class="content"><style type="text/css">
            applet {
                border: 1px solid #999999;
            }
        </style><!--NOTE: Syntax highlighting script is LGPL--><script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"></script><script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js"></script><script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js"></script><script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js"></script><link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css"><link type="text/css" rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css"><script type="text/javascript">
            SyntaxHighlighter.all();
        </script><div class="section">
        <p>
            Data binding refers to the process of automatically populating or extracting data from
            a set of user interface elements. In Pivot, data binding is driven primarily by two
            methods of the <tt>Component</tt> class: <tt>load()</tt> and <tt>store()</tt>. Each
            method takes an <tt>Object</tt> argument called the "context". The context is either an
            instance of a Java bean class or an instance of
            <tt>org.apache.pivot.collections.Dictionary</tt>. Calling <tt>load()</tt> causes data
            from the context to be "loaded" into the component; calling <tt>store()</tt> performs
            the reverse operation and "stores" data from the component into the context. A third
            method, <tt>clear()</tt> allows a caller to reset any bindings.
        </p>

        <p>
            Components that support data binding provide "key" properties that allow a caller to
            associate a property value with a value in the bind context. For example, the
            <tt>Label</tt> class provides a "textKey" property that maps the label's "text" property
            to a value provided by the context.
        </p>

        <p>
            The following application demonstrates data binding. It allows the user to load a form
            with address data either from a JSON file or from a Java bean object, as well as clear
            the form. Note that binding to a Java bean is accomplished by wrapping the bean in an
            instance of <tt>org.apache.pivot.beans.BeanAdapter</tt> before passing it to the
            <tt>load()</tt> method:
        </p>

        <script type="text/javascript" src="https://java.com/js/deployJava.js"></script><script type="text/javascript">
            
            var attributes = {
                code:"org.apache.pivot.wtk.BrowserApplicationContext$HostApplet",
                width:"430",
                height:"280"
            };

            
            

            
            var libraries = [];
            libraries.push("/lib/pivot-core-2.0.5.jar");
                libraries.push("/lib/pivot-wtk-2.0.5.jar");
                libraries.push("/lib/pivot-wtk-terra-2.0.5.jar");
                libraries.push("/lib/pivot-tutorials-2.0.5.jar");
                
                    libraries.push("/lib/svgSalamander-tiny.jar");
                

            attributes.archive = libraries.join(",");

            
            var parameters = {
                codebase_lookup:false,
                application_class_name:'org.apache.pivot.wtk.ScriptApplication'
            };

            
            var javaArguments = ["-Dsun.awt.noerasebackground=true",
                "-Dsun.awt.erasebackgroundonresize=true"];

            

            parameters.java_arguments = javaArguments.join(" ");

            
            
                var startupProperties = [];
                
                    startupProperties.push("src=/org/apache/pivot/tutorials/databinding/data_binding.bxml");
                
                parameters.startup_properties = startupProperties.join("&");
            

            deployJava.runApplet(attributes, parameters, "1.7");
        </script>

        <p>
            The BXML simply sets up the form structure and the bind keys:
        </p>

        <pre class="brush:xml">
            
            &lt;databinding:DataBinding title="Data Binding" maximized="true"
                xmlns:bxml="http://pivot.apache.org/bxml"
                xmlns:databinding="org.apache.pivot.tutorials.databinding"
                xmlns="org.apache.pivot.wtk"&gt;
                &lt;Border styles="{padding:6}"&gt;
                    &lt;BoxPane orientation="vertical" styles="{spacing:10, fill:true}"&gt;
                        &lt;Form bxml:id="form" styles="{showFlagIcons:false}"&gt;
                            &lt;Form.Section&gt;
                                &lt;Label bxml:id="sourceLabel" Form.label="Source" styles="{font:{italic:true}}"/&gt;

                                &lt;Label Form.label="ID" textKey="id"/&gt;
                                &lt;TextInput Form.label="Name" textKey="name"/&gt;

                                &lt;BoxPane Form.label="Address" orientation="vertical"&gt;
                                    &lt;TextInput textKey="address.street" prompt="Street"/&gt;
                                    &lt;BoxPane&gt;
                                        &lt;TextInput textKey="address.city" prompt="City"/&gt;
                                        &lt;TextInput textKey="address.state" textSize="6" prompt="State"/&gt;
                                        &lt;TextInput textKey="address.zip" textSize="6" prompt="Zip"/&gt;
                                    &lt;/BoxPane&gt;
                                &lt;/BoxPane&gt;

                                &lt;TextInput Form.label="Phone" textKey="phoneNumber"/&gt;
                                &lt;TextInput Form.label="Email" textKey="emailAddress"/&gt;

                                &lt;BoxPane Form.label="IM"&gt;
                                    &lt;TextInput textKey="imAccount.id"/&gt;
                                    &lt;ListButton selectedItemKey="imAccount.type"
                                        listData="['AIM', 'Jabber', 'Yahoo']"/&gt;
                                &lt;/BoxPane&gt;
                            &lt;/Form.Section&gt;
                        &lt;/Form&gt;

                        &lt;Separator/&gt;

                        &lt;BoxPane styles="{horizontalAlignment:'right'}"&gt;
                            &lt;PushButton bxml:id="loadJSONButton" buttonData="Load JSON"/&gt;
                            &lt;PushButton bxml:id="loadJavaButton" buttonData="Load Java"/&gt;
                            &lt;PushButton bxml:id="clearButton" buttonData="Clear"/&gt;
                        &lt;/BoxPane&gt;
                    &lt;/BoxPane&gt;
                &lt;/Border&gt;
            &lt;/databinding:DataBinding&gt;
            
        </pre>

        <p>
            The windows's <tt>initialize()</tt> method defines the button press listeners that
            load or clear the form:
        </p>

        <pre class="brush:java">
            
            package org.apache.pivot.tutorials.databinding;

            import java.io.InputStream;
            import java.net.URL;

            import org.apache.pivot.beans.BeanAdapter;
            import org.apache.pivot.beans.Bindable;
            import org.apache.pivot.collections.Map;
            import org.apache.pivot.json.JSONSerializer;
            import org.apache.pivot.util.Resources;
            import org.apache.pivot.wtk.Button;
            import org.apache.pivot.wtk.ButtonPressListener;
            import org.apache.pivot.wtk.Form;
            import org.apache.pivot.wtk.Label;
            import org.apache.pivot.wtk.PushButton;
            import org.apache.pivot.wtk.Window;

            public class DataBinding extends Window implements Bindable {
                private Form form = null;
                private PushButton loadJavaButton = null;
                private PushButton loadJSONButton = null;
                private PushButton clearButton = null;
                private Label sourceLabel = null;

                private static final Contact CONTACT = new Contact("101", "Joe User",
                    new Address("123 Main St.", "Cambridge", "MA", "02142"),
                    "(617) 555-1234", "joe_user@foo.com",
                    new IMAccount("juser1234", "AIM"));

                @Override
                public void initialize(Map&lt;String, Object&gt; namespace, URL location, Resources resources) {
                    form = (Form)namespace.get("form");
                    loadJavaButton = (PushButton)namespace.get("loadJavaButton");
                    loadJSONButton = (PushButton)namespace.get("loadJSONButton");
                    clearButton = (PushButton)namespace.get("clearButton");
                    sourceLabel = (Label)namespace.get("sourceLabel");

                    loadJavaButton.getButtonPressListeners().add(new ButtonPressListener() {
                        @Override
                        public void buttonPressed(Button button) {
                            form.load(new BeanAdapter(CONTACT));
                            sourceLabel.setText("Java");
                        }
                    });

                    loadJSONButton.getButtonPressListeners().add(new ButtonPressListener() {
                        @Override
                        public void buttonPressed(Button button) {
                            JSONSerializer serializer = new JSONSerializer();
                            InputStream inputStream = getClass().getResourceAsStream("contact.json");

                            try {
                                form.load(serializer.readObject(inputStream));
                                sourceLabel.setText("JSON");
                            } catch(Exception exception) {
                                System.err.println(exception);
                            }

                            button.setEnabled(true);
                        }
                    });

                    clearButton.getButtonPressListeners().add(new ButtonPressListener() {
                        @Override
                        public void buttonPressed(Button button) {
                            form.clear();
                            sourceLabel.setText("");
                        }
                    });
                }
            }
            
        </pre>

        <p>
            The JSON representation of the sample contact record is defined as follows (note that,
            while JSON is used to represent the data in this example, any class that implements
            the <tt>Dictionary</tt> interface, including <tt>HashMap</tt>, can be used):
        </p>

        <pre class="brush:jscript">
            
            {   id: 101,
                name: "Joe User",

                address: {
                    street: "123 Main St.",
                    city: "Cambridge",
                    state: "MA",
                    zip: "02142"
                },

                phoneNumber: "(617) 555-1234",
                emailAddress: "joe_user@foo.com",

                imAccount: {
                    id: "juser1234",
                    type: "AIM"
                }
            }
            
        </pre>

        <p>
            The Java bean version, which represents the same data, is composed of the following
            classes:
        </p>

        <pre class="brush:java">
            
            package org.apache.pivot.tutorials.databinding;

            public class Contact {
                private String id;
                private String name;
                private Address address;
                private String phoneNumber;
                private String emailAddress;
                private IMAccount imAccount;

                public Contact(String id, String name, Address address, String phoneNumber,
                    String emailAddress, IMAccount imAccount) {
                    this.id = id;
                    this.name = name;
                    this.address = address;
                    this.phoneNumber = phoneNumber;
                    this.emailAddress = emailAddress;
                    this.imAccount = imAccount;
                }

                public String getID() {
                    return id;
                }

                public String getId() {
                    return getID();
                }

                public String getName() {
                    return name;
                }

                public Address getAddress() {
                    return address;
                }

                public String getPhoneNumber() {
                    return phoneNumber;
                }

                public String getEmailAddress() {
                    return emailAddress;
                }

                public IMAccount getIMAccount() {
                    return imAccount;
                }

                public IMAccount getImAccount() {
                    return getIMAccount();
                }
            }
            
        </pre>

        <pre class="brush:java">
            
            package org.apache.pivot.tutorials.databinding;

            public class Address {
                private String street;
                private String city;
                private String state;
                private String zip;

                public Address() {
                    this(null, null, null, null);
                }

                public Address(String street, String city, String state, String zip) {
                    this.street = street;
                    this.city = city;
                    this.state = state;
                    this.zip = zip;
                }

                public String getStreet() {
                    return street;
                }

                public String getCity() {
                    return city;
                }

                public String getState() {
                    return state;
                }

                public String getZip() {
                    return zip;
                }
            }
            
        </pre>

        <pre class="brush:java">
            
            public class IMAccount {
                private String id;
                private String type;

                public IMAccount() {
                    this(null, null);
                }

                public IMAccount(String id, String type) {
                    this.id = id;
                    this.type = type;
                }

                public String getID() {
                    return id;
                }

                public String getId() {
                    return getID();
                }

                public String getType() {
                    return type;
                }
            }
            
        </pre>

        <p>
            This application's data binding requirements are fairly straightforward. It is
            load-only, and all of the data is simply presented as-is. However, many real-world
            applications may want to transform the data in some way before presenting it to the
            user; for example, an application may want to apply currency formatting to a numeric
            value, or convert an encoded date string to an instance of
            <tt>org.apache.pivot.util.CalendarDate</tt>. Components that support data binding
            provide a "bind mapping" interface to facilitate such transformations. Bind mappings
            are outside the scope of this example but are demonstrated in the
            <a href="query-servlet.html">QueryServlet</a> section as well as the
            <a href="stock-tracker.html">Stock Tracker</a> tutorial.
        </p>

        <p>
            Also, though it is not shown in this example, bindable components allow a caller to
            control the bind direction via a "bind type" property. The bind type is specified by
            an instance of the <tt>org.apache.pivot.wtk.BindType</tt> enum, which defines the
            following values:
        </p>

        <ul>
            <li><tt>LOAD</tt> - binding will only occur during a <tt>load()</tt> operation</li>
            <li><tt>STORE</tt> - binding will only occur during a <tt>store()</tt> operation</li>
            <li><tt>BOTH</tt> - binding occur during both <tt>load()</tt> and <tt>store()</tt> operations</li>
        </ul>
    </div><p>Next: <a href="property-binding.html">Property Binding</a></p></div></div></div><div id="footer" class="group"><div class="footerLogo">Copyright (c) 1999-2023<br>The Apache Software Foundation.</div><div class="footerLinks"><ul class="footerMenuGr"><li><strong>Demos</strong><ul><li><a href="/demos/kitchen-sink.html" target="_new">"Kitchen Sink"</a></li><li><a href="/demos/component-explorer.html" target="_new">Component Explorer</a></li><li><a href="http://cwiki.apache.org/confluence/display/PIVOT/Other+Demos" target="_new">Charting</a></li><li><a href="/demos/">More Demos</a></li></ul></li><li><strong>Documentation</strong><ul><li><a href="/getting-started.html">Getting Started</a></li><li><a href="/tutorials/">Tutorial</a></li><li><a href="/faq.html">FAQ</a></li><li><a href="/2.0.5/docs/api/">Javadoc (2.0.5)</a></li></ul></li><li><strong>Get Involved</strong><ul><li><a href="/svn.html">SVN Repositories</a></li><li><a href="/lists.html">Mailing Lists</a></li><li><a href="http://issues.apache.org/jira/browse/PIVOT">Bug Database</a></li><li><a href="http://cwiki.apache.org/PIVOT/">Wiki</a></li></ul></li><li><strong>Related</strong><ul><li><a href="http://code.google.com/a/apache-extras.org/p/pivot-jfree/">JFreeChart Provider</a></li><li><a href="http://code.google.com/a/apache-extras.org/p/pivot-common/">Pivot-Common</a></li><li><a href="http://code.google.com/a/apache-extras.org/p/pivot-contrib/">Pivot-Contrib</a></li><li><a href="http://code.google.com/a/apache-extras.org/p/pivot-multilang/">Pivot-Multilang</a></li><li><a href="http://code.google.com/a/apache-extras.org/p/pivot-stuff/">Pivot-Stuff</a></li></ul></li><li><strong>About</strong><ul><li><a href="/who-we-are.html">Who We Are</a></li><li><a href="/contact.html">Contact</a></li><li><a href="http://www.apache.org/">Apache Home</a></li><li><a href="/legal.html">Legal/License</a></li><li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li><li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li></ul></li></ul></div><div class="footerLinks">
                    Apache Pivot, Pivot, Apache, and the Apache Pivot project logo are trademarks of The Apache Software Foundation.
                </div></div></div></body></html>