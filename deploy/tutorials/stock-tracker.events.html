<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License,
Version 2.0 (the "License"); you may not use this file except in
compliance with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--><html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /><title>Event Handling | Apache Pivot</title><link xmlns="" type="text/css" rel="stylesheet" href="/styles/pivot.css"><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
                document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
                </script><script type="text/javascript">
                try {
                var pageTracker = _gat._getTracker("UA-7977275-3");
                pageTracker._trackPageview();
                } catch(err) {}</script></head><body><div xmlns="" id="wrapper"><div id="main"><div id="header"><div class="logo"><a href="/index.html"><img title="Apache Pivot Homepage" alt="Apache Pivot" src="/images/logo.png"></a></div><div class="tagline"><img style="visibility:hidden" alt="Rich Internet Applications in Java" src="/images/tagline.png"></div><ul class="navi"><li><a href="/demos/">Demos</a></li><li><a href="/download.cgi#2.0">Download</a></li><li><a href="/tutorials/">Tutorial</a></li><li><a href="/get-involved.html">Get Involved</a></li><li><a href="/about.html">About</a></li></ul></div><div class="group" id="contentBase"><h1>Event Handling</h1><ul class="naviLeft"><li><a href="/tutorials/sample-application.html">Sample Application</a></li><li><a href="/tutorials/platform-overview.html">Platform Overview</a></li><li><a href="/tutorials/hello-world.html">Hello, World!</a></li><li><a href="/tutorials/hello-bxml.html">Hello, BXML!</a></li><li><a href="/tutorials/component-and-container.html">Component &amp; Container</a></li><li><a href="/tutorials/labels-and-image-views.html">Labels &amp; Image Views</a></li><li><a href="/tutorials/svg-images.html">SVG Images</a></li><li><a href="/tutorials/buttons.html">Buttons</a></li><li><a href="/tutorials/push-buttons.html">Push Buttons</a></li><li><a href="/tutorials/toggle-buttons.html">Toggle Buttons</a></li><li><a href="/tutorials/radio-buttons.html">Radio Buttons</a></li><li><a href="/tutorials/checkboxes.html">Checkboxes</a></li><li><a href="/tutorials/link-buttons.html">Link Buttons</a></li><li><a href="/tutorials/lists.html">Lists</a></li><li><a href="/tutorials/list-buttons.html">List Buttons</a></li><li><a href="/tutorials/repeatable-list-buttons.html">Repeatable List Buttons</a></li><li><a href="/tutorials/text.html">Text</a></li><li><a href="/tutorials/suggestion-popups.html">Suggestion Popups</a></li><li><a href="/tutorials/text-areas.html">Text Areas</a></li><li><a href="/tutorials/separators.html">Separators</a></li><li><a href="/tutorials/layout-containers.html">Layout Containers</a></li><li><a href="/tutorials/flow-panes.html">Flow Panes</a></li><li><a href="/tutorials/box-panes.html">Box Panes</a></li><li><a href="/tutorials/grid-panes.html">Grid Panes</a></li><li><a href="/tutorials/table-panes.html">Table Panes</a></li><li><a href="/tutorials/borders.html">Borders</a></li><li><a href="/tutorials/stack-panes.html">Stack Panes</a></li><li><a href="/tutorials/split-panes.html">Split Panes</a></li><li><a href="/tutorials/forms.html">Forms</a></li><li><a href="/tutorials/panels.html">Panels</a></li><li><a href="/tutorials/navigation-containers.html">Navigation Containers</a></li><li><a href="/tutorials/card-panes.html">Card Panes</a></li><li><a href="/tutorials/tab-panes.html">Tab Panes</a></li><li><a href="/tutorials/accordions.html">Accordions</a></li><li><a href="/tutorials/expanders.html">Expanders</a></li><li><a href="/tutorials/rollups.html">Rollups</a></li><li><a href="/tutorials/viewports.html">Viewports</a></li><li><a href="/tutorials/scroll-panes.html">Scroll Panes</a></li><li><a href="/tutorials/panoramas.html">Panoramas</a></li><li><a href="/tutorials/progress-indicators.html">Progress Indicators</a></li><li><a href="/tutorials/meters.html">Meters</a></li><li><a href="/tutorials/activity-indicators.html">Activity Indicators</a></li><li><a href="/tutorials/bounded-range-components.html">Bounded Range Components</a></li><li><a href="/tutorials/sliders.html">Sliders</a></li><li><a href="/tutorials/scroll-bars.html">Scroll Bars</a></li><li><a href="/tutorials/spinners.html">Spinners</a></li><li><a href="/tutorials/calendars.html">Calendars</a></li><li><a href="/tutorials/menus.html">Menus</a></li><li><a href="/tutorials/context-menus.html">Context Menus</a></li><li><a href="/tutorials/menu-bars.html">Menu Bars</a></li><li><a href="/tutorials/menu-buttons.html">Menu Buttons</a></li><li><a href="/tutorials/color-choosers.html">Color Choosers</a></li><li><a href="/tutorials/table-views.html">Table Views</a></li><li><a href="/tutorials/table-views.json.html">JSON-based TableView</a></li><li><a href="/tutorials/table-views.custom.html">Custom TableView</a></li><li><a href="/tutorials/tree-views.html">Tree Views</a></li><li><a href="/tutorials/file-browsing.html">File Browsing</a></li><li><a href="/tutorials/windows.html">Windows</a></li><li><a href="/tutorials/clipboard.html">Clipboard</a></li><li><a href="/tutorials/drag-and-drop.html">Drag and Drop</a></li><li><a href="/tutorials/effects.html">Effects</a></li><li><a href="/tutorials/effects.transitions.html">Transitions</a></li><li><a href="/tutorials/data-binding.html">Data Binding</a></li><li><a href="/tutorials/property-binding.html">Property Binding</a></li><li><a href="/tutorials/localization.html">Localization</a></li><li><a href="/tutorials/background-tasks.html">Background Tasks</a></li><li><a href="/tutorials/web-queries.html">Web Queries</a></li><li><a href="/tutorials/query-servlet.html">QueryServlet</a></li><li><a href="/tutorials/scripting.html">Scripting</a></li><li><a href="/tutorials/summary.html">Summary</a></li><li><a href="/tutorials/stock-tracker.html">The "Stock Tracker" Application</a></li><li><a href="/tutorials/stock-tracker.ui.html">UI Markup Using BXML</a></li><li><a href="/tutorials/stock-tracker.events.html">Event Handling</a></li><li><a href="/tutorials/stock-tracker.web-queries.html">Web Queries</a></li><li><a href="/tutorials/stock-tracker.data-binding.html">Data Binding</a></li><li><a href="/tutorials/stock-tracker.localization.html">Localization</a></li><li><a href="/tutorials/bxml-primer.html">BXML Primer</a></li></ul><div class="content"><style type="text/css">
            applet {
                border: 1px solid #999999;
            }
        </style><!--NOTE: Syntax highlighting script is LGPL--><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script><script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script><link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css"><link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css"><script type="text/javascript">
            SyntaxHighlighter.all();
        </script><div class="section">
        <p>
            While BXML is often used to declare the <i>structure</i> of an application, the
            application's <i>behavior</i> is still defined in code (either Java or a JVM-compatible
            scripting language). Most application logic is executed in response to an "event"
            triggered by some external source, such as user input or the completion of an asynchronous
            operation running in a background thread.
        </p>

        <h2>Loading the UI</h2>

        <p>
            In general, a Pivot application will load its user interface in the <tt>startup()</tt>
            method of the main application class. This method, along with the <tt>shutdown()</tt>,
            <tt>suspend()</tt>, and <tt>resume()</tt> methods, is defined by the <tt>Application</tt>
            interface, which all Pivot applications must implement.
        </p>

        <p>
            The <tt>StockTracker</tt> class implements the <tt>Application</tt> interface for the
            Stock Tracker application. <tt>StockTracker</tt>'s <tt>startup()</tt> method is shown
            below:
        </p>

        <pre class="brush:java">
            
            @Override
            public void startup(Display display, Map&lt;String, String&gt; properties) throws Exception {
                String language = properties.get(LANGUAGE_KEY);
                Locale locale = (language == null) ? Locale.getDefault() : new Locale(language);
                Resources resources = new Resources(StockTrackerWindow.class.getName(), locale);

                BXMLSerializer bxmlSerializer = new BXMLSerializer();
                window = (StockTrackerWindow)bxmlSerializer.readObject(getClass().getResource("stock_tracker_window.bxml"),
                    resources);
                window.open(display);
            }
            
        </pre>

        <p>
            This code creates an instance of <tt>BXMLSerializer</tt> and loads the BXML source for
            the main window. It then opens the main window, causing the application to appear on
            the screen.
        </p>

        <h2>Adding Event Listeners</h2>

        <p>
            At this point, the application is visible and the user can begin interacting with it.
            Pivot applications respond to user actions by firing "events". For example, Pivot
            components fire such events as "mouse moved", "button pressed", or "selected index
            changed". A caller signals its interest in a particular event by implementing an
            interface that defines an event handler method and adding itself as an event lister on
            the event source.
        </p>

        <p>
            In the following code snippet taken from <tt>StockTrackerWindow#initialize()</tt>, two
            event handlers are created: a selection change listener on the stock quote table view
            and a button press listener on the Yahoo! Finance link button. The first listenener
            is called when the selection changes in the quote table view, and the second when
            the user clicks on the link:
        </p>

        <pre class="brush:java">
            
            @Override
            public void initialize(Map&lt;String, Object&gt; namespace, URL location, Resources resources) {
                ...

                stocksTableView.getTableViewSelectionListeners().add(new TableViewSelectionListener.Adapter() {
                    @Override
                    public void selectedRangesChanged(TableView tableView, Sequence&lt;Span&gt; previousSelectedRanges) {
                        ...
                    }
                });

                ...

                addSymbolButton.setAction(addSymbolAction);
                removeSymbolsButton.setAction(removeSymbolsAction);

                ...

                yahooFinanceButton.getButtonPressListeners().add(new ButtonPressListener() {
                    @Override
                    public void buttonPressed(Button button) {
                        ...
                    }
                });
            }
            
        </pre>

        <p>
            Some listener interfaces, such as <tt>ButtonPressListener</tt>, define only a single
            event handler method, but others (including <tt>TableViewSelectionListener</tt>) define
            more than one and serve as a grouping of related events. Interfaces with multiple
            handler methods generally define an inner <tt>Adapter</tt> class that can be used to
            simplify subclassing, as shown above.
        </p>

        <p>
            Note that, though these handlers are implemented as anonymous inner classes, this is
            not required - any class that implements the appropriate listener interface can
            register as a listener. It is also possible to define listeners in script within the
            BXML file itself; this is discussed in more detail in the
            <a href="scripting.html">Scripting</a> section.
        </p>

        <h2>Actions</h2>

        <p>
            Though the "add symbol" and "remove symbol" operations could be performed in a button
            press listener attached to their respective buttons, they have been abstracted in the
            Stock Tracker example application into "actions". An action in Pivot is a class that
            extends the abstract <tt>org.apache.pivot.wtk.Action</tt> class. This class defines
            a single abstract <tt>perform()</tt> method that is called to invoke the action:
        </p>

        <pre class="brush:java">
            
            private Action addSymbolAction = new Action(false) {
                @Override
                @SuppressWarnings("unchecked")
                public void perform(Component source) {
                    ...
                }
            };
            
        </pre>

        <p>
            Actions can be assigned to multiple elements within an application (for example,
            to a toolbar button, a menu item, and to a keystroke combination). This allows the
            same code to be executed in response to multiple user gestures without the need to
            write redundant event listeners. Actions also support an enabled state that is mirrored
            by any component attached to the action; this allows an application to easily manage
            the set of allowed actions given the current application state.
        </p>
    </div><p>Next: <a href="stock-tracker.web-queries.html">Web Queries</a></p></div></div></div><div class="group" id="footer"><div class="footerLogo">Copyright (c) 1999-2011<br>The Apache Software Foundation.</div><div class="footerLinks"><ul class="footerMenuGr"><li><strong>Demos</strong><ul><li><a href="/demos/kitchen-sink.html" target="_new">"Kitchen Sink"</a></li><li><a href="/demos/component-explorer.html" target="_new">Component Explorer</a></li><li><a href="http://ixnay.biz/pivot-jfree-demos/charts_demo.html" target="_new">Charting</a></li><li><a href="/demos/">More Demos</a></li></ul></li><li><strong>Documentation</strong><ul><li><a href="/getting-started.html">Getting Started</a></li><li><a href="/tutorials/">Tutorial</a></li><li><a href="/faq.html">FAQ</a></li><li><a href="/2.0/docs/api/">Javadoc (2.0)</a></li></ul></li><li><strong>Get Involved</strong><ul><li><a href="/svn.html">SVN Repositories</a></li><li><a href="/lists.html">Mailing Lists</a></li><li><a href="http://issues.apache.org/jira/browse/PIVOT">Bug Database</a></li><li><a href="http://cwiki.apache.org/PIVOT/">Wiki</a></li></ul></li><li><strong>Related</strong><ul><li><a href="http://code.google.com/p/pivot-jfree/">JFreeChart Provider</a></li></ul></li><li><strong>About</strong><ul><li><a href="/who-we-are.html">Who We Are</a></li><li><a href="/contact.html">Contact</a></li><li><a href="/news.html">News</a></li><li><a href="/legal.html">Legal/License</a></li></ul></li></ul></div></div></div></body></html>